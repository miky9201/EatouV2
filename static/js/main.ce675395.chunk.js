(this.webpackJsonpeatou=this.webpackJsonpeatou||[]).push([[0],{10:function(e){e.exports=JSON.parse('[{"id":1,"restaurantName":"Bronco","location":{"lat":48.8737815,"lng":2.3501649},"ratings":[{"stars":4,"comment":"Un excellent restaurant, j\'y reviendrai ! Par contre il vaut mieux aimer la viande."},{"stars":5,"comment":"Tout simplement mon restaurant pr\xe9f\xe9r\xe9 !"}]},{"id":2,"restaurantName":"Chez Papa","location":{"lat":48.92378462909014,"lng":2.260251679761609},"ratings":[{"stars":5,"comment":"Tout simplement le meilleur restaurant de Colombes"},{"stars":4,"comment":"Waouuh... Une v\xe9ritable claque !"}]},{"id":3,"restaurantName":"Babalou","location":{"lat":48.8865035,"lng":2.3442197},"ratings":[{"stars":5,"comment":"Une minuscule pizzeria d\xe9licieuse cach\xe9e juste \xe0 c\xf4t\xe9 du Sacr\xe9 choeur !"},{"stars":3,"comment":"J\'ai trouv\xe9 \xe7a correct, sans plus"}]},{"id":4,"restaurantName":"Le Bidoche","location":{"lat":48.86507570478589,"lng":2.367070027543483},"ratings":[{"stars":4,"comment":"Waouh, incroyablement bon et pas cher !"},{"stars":1,"comment":"Bof, rien d\'exceptionnel"}]},{"id":5,"restaurantName":"Le Caracole","location":{"lat":48.92230437710803,"lng":2.2530378926812844},"ratings":[{"stars":4,"comment":"Personnel sympathique, bonne nourriture"},{"stars":1,"comment":"Le Burger est incroyable !"}]}]')},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),o=n(6),s=n.n(o),i=(n(16),n(8),n(2)),l=Object(c.createContext)(),u=function(e){var t=Object(c.useState)(0),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(l.Provider,{value:[r,o],children:e.children})},j=Object(c.createContext)(),b=function(e){var t=Object(c.useState)({}),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(j.Provider,{value:[r,o],children:e.children})},d=Object(c.createContext)(),m=function(e){var t=Object(c.useState)(),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(d.Provider,{value:[r,o],children:e.children})},O=Object(c.createContext)(),h=function(e){var t=Object(c.useState)(0),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(O.Provider,{value:[r,o],children:e.children})},x=Object(c.createContext)(),v=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(x.Provider,{value:[r,o],children:e.children})},f=Object(c.createContext)(),g=function(e){var t=Object(c.useState)({}),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(f.Provider,{value:[r,o],children:e.children})},p=n(10),A=Object(c.createContext)(),C=function(e){var t=Object(c.useState)(p),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(A.Provider,{value:[r,o],children:e.children})},w=Object(c.createContext)(),N=function(e){var t=Object(c.useState)(),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(a.jsx)(w.Provider,{value:[r,o],children:e.children})},S=n.p+"static/media/eatou-yellow.0993e86f.png",y=function(){return Object(a.jsxs)("div",{className:"header flex-col-center-center",children:[Object(a.jsx)("img",{id:"logo",src:S,alt:""}),Object(a.jsx)("h1",{children:"Eatou"}),Object(a.jsx)("p",{children:"Bien manger partout !"})]})},B=function(){var e=Object(c.useContext)(l),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{className:"filter yellow flex-col-center-center",children:[Object(a.jsx)("label",{htmlFor:"star-select",children:"Choisir un restaurant"}),Object(a.jsx)("form",{children:Object(a.jsxs)("select",{value:n,onChange:function(e){r(e.target.value)},children:[Object(a.jsx)("option",{value:"0",children:"Toutes les notes"}),Object(a.jsx)("option",{value:"1",children:"1 \xe9toile"}),Object(a.jsx)("option",{value:"2",children:"2 \xe9toiles"}),Object(a.jsx)("option",{value:"3",children:"3 \xe9toiles"}),Object(a.jsx)("option",{value:"4",children:"4 \xe9toiles"}),Object(a.jsx)("option",{value:"5",children:"5 \xe9toiles"})]})})]})},k=function(e){var t=e.comment;return Object(a.jsx)("p",{children:t})},L=function(e){var t=e.onSubmit,n=e.className,c=e.children;return Object(a.jsx)("form",{onSubmit:t,className:n,children:c})},V=function(e){var t=e.className,n=e.name,c=e.labelValue,r=e.onChange;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:t,htmlFor:n,children:c}),Object(a.jsx)("textarea",{id:n,onChange:r,name:n})]})},F=function(e){var t=e.className,n=e.name,c=e.labelValue,r=e.value,o=e.onChange,s=e.options;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:t,htmlFor:n,children:c}),Object(a.jsx)("select",{id:n,value:r,onChange:o,children:s.map((function(e){return e}))})]})},P=function(e){var t=e.className,n=e.name,c=e.value;return Object(a.jsx)("input",{className:t,type:n,value:c})},E=function(e){var t=e.label,n=e.value;return Object(a.jsx)("option",{value:n,children:t})},J=[Object(a.jsx)(E,{value:0,label:"0 \xe9toiles"},0),Object(a.jsx)(E,{value:1,label:"1 \xe9toiles"},1),Object(a.jsx)(E,{value:2,label:"2 \xe9toiles"},2),Object(a.jsx)(E,{value:3,label:"3 \xe9toiles"},3),Object(a.jsx)(E,{value:4,label:"4 \xe9toiles"},4),Object(a.jsx)(E,{value:5,label:"5 \xe9toiles"},5)],M=function(e){var t=e.restaurant,n=e.setShowCommentEditor,r=Object(c.useContext)(d),o=Object(i.a)(r,2),s=o[0],l=o[1],u=Object(c.useContext)(O),j=Object(i.a)(u,2),b=j[0],m=j[1];return Object(a.jsxs)(L,{onSubmit:function(e){var a,c,r;e.preventDefault(),a=t.ratings,c=s,r=b,a.push({comment:c,stars:r}),l(""),n(!1)},className:"comment-adder flex-col-spacearound-center yellow",children:[Object(a.jsx)(V,{onChange:function(e){l(e.target.value)},className:"mb-5",name:"comment",labelValue:"Ajouter un commentaire"}),Object(a.jsx)(F,{value:b,onChange:function(e){m(e.target.value)},className:"mb-5",name:"star",options:J}),Object(a.jsx)(P,{className:"display-comment-button",name:"submit",value:"Soumettre"})]})},R=function(e){var t,n=e.length,a=0;for(t=0;t<n;t++)a+=parseFloat(e[t]);return(a/n).toFixed(2)},T=function(e){var t=e.restaurant,n=Object(c.useState)(!1),r=Object(i.a)(n,2),o=r[0],s=r[1],l=Object(c.useState)(!1),u=Object(i.a)(l,2),j=u[0],b=u[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("img",{id:"imgRestaurant",src:t.streetview,alt:"restaurant"}),Object(a.jsx)("h2",{className:"mb-5",children:t.restaurantName}),Object(a.jsxs)("p",{children:[t.address,Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Note :"})," ",R(t.ratings.map((function(e){return e.stars}))),"/5"]}),Object(a.jsx)("div",{className:"darkgrey comment-displayer",children:o&&t.ratings.map((function(e,t){return Object(a.jsx)(k,{comment:e.comment},t)}))}),Object(a.jsxs)("div",{className:"button-container flex-col-spacearound-center",children:[Object(a.jsx)("button",{className:"display-comment-button mb-15",onClick:function(){return s(!o)},children:o?"Cacher les Commentaires":"Afficher les Commentaires"}),Object(a.jsx)("button",{className:"add-comment-button mb-15",onClick:function(){return b(!j)},children:j?"X":"Ajouter un Commentaire"})]}),j&&Object(a.jsx)(M,{restaurant:t,showCommentEditor:j,setShowCommentEditor:b})]},t.id)})},X="AIzaSyArU8uSLFz-bJIUY_jWrYz7SRKHw2pPUuU",U=function(e){return fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e.location.lat,",").concat(e.location.lng,"&key=").concat(X)).then((function(e){return e.json()})).then((function(t){return e.address=t.results[0].formatted_address}))},q=function(e){return fetch("https://maps.googleapis.com/maps/api/streetview?size=500x400&location=".concat(e.location.lat,",").concat(e.location.lng,"&key=").concat(X)).then((function(t){return e.streetview=t.url}))},z=function(e,t){return R(e.ratings.map((function(e){return e.stars})))>=t},W=function(){var e=Object(c.useContext)(l),t=Object(i.a)(e,1)[0],n=Object(c.useContext)(j),r=Object(i.a)(n,1)[0],o=Object(c.useContext)(A),s=Object(i.a)(o,1)[0];return Object(c.useEffect)((function(){s.forEach((function(e){q(e),U(e)}))}),[s]),s.map((function(e){return z(e,t)&&function(e,t){return t.s<e.location.lat&&e.location.lat<t.n&&t.o<e.location.lng&&e.location.lng<t.e}(e,r)?Object(a.jsx)(T,{restaurant:e},e.id):null}))},I=n(4),Y=n.n(I),K=n(5),H=n(7),Z=function(){var e=Object(K.a)(Y.a.mark((function e(t,n,a,c,r,o){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:t,restaurantName:n,location:{lat:a,lng:c},ratings:[{stars:r,comment:o}]},e.next=3,U(s);case 3:return e.next=5,q(s);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r,o){return e.apply(this,arguments)}}(),G=[Object(a.jsx)(E,{value:0,label:"0 \xe9toiles"},0),Object(a.jsx)(E,{value:1,label:"1 \xe9toiles"},1),Object(a.jsx)(E,{value:2,label:"2 \xe9toiles"},2),Object(a.jsx)(E,{value:3,label:"3 \xe9toiles"},3),Object(a.jsx)(E,{value:4,label:"4 \xe9toiles"},4),Object(a.jsx)(E,{value:5,label:"5 \xe9toiles"},5)],D=function(e){var t=e.toggle,n=Object(c.useContext)(O),r=Object(i.a)(n,2),o=r[0],s=r[1],l=Object(c.useContext)(d),u=Object(i.a)(l,2),j=u[0],b=u[1],m=Object(c.useContext)(f),h=Object(i.a)(m,1)[0],x=Object(c.useContext)(A),v=Object(i.a)(x,2),g=v[0],p=v[1],C=Object(c.useState)(""),w=Object(i.a)(C,2),N=w[0],S=w[1],y=function(){var e=Object(K.a)(Y.a.mark((function e(t,n,a){var c,r,o,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return c=Array.from(g),r=c.length+1,o={lat:h.lat,lng:h.lng},e.next=6,Z(r,t,o.lat,o.lng,a,n);case 6:s=e.sent,c.push(s),p(c),e.next=12;break;case 11:alert("Merci de donner un titre \xe0 votre restaurant !");case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(a.jsxs)(L,{onSubmit:function(e){e.preventDefault(),t(),y(N,j,o),b(),s(0)},className:"modal-form comment-adder flex-col-spacearound-center yellow",children:[Object(a.jsx)(V,{onChange:function(e){return S(e.target.value)},class:"mb-5",name:"title",labelValue:"Nom du restaurant"}),Object(a.jsx)(V,{onChange:function(e){return b(e.target.value)},class:"mb-5",name:"comment",labelValue:"Ajouter un commentaire"}),Object(a.jsx)(F,{value:o,onChange:function(e){return s(e.target.value)},class:"mb-5",name:"star",options:G}),Object(a.jsx)(P,{className:"display-comment-button",name:"submit",value:"Soumettre"})]})},Q=function(){var e=Object(c.useContext)(x),t=Object(i.a)(e,2),n=t[0],r=t[1],o=function(){r(!n)};return n?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"modal flex-col-center-center",children:[Object(a.jsx)("h2",{children:"Vous souhaitez ajouter un restaurant ?"}),Object(a.jsx)("button",{className:"add-comment-button",onClick:o,children:"Annuler"}),Object(a.jsx)(D,{toggle:o})]})}):null},_=function(){var e=Object(K.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("https://api.foursquare.com/v2/venues/explore?client_id=".concat("CPSJIZVAFMU5TYHY01C2VNSZOJHZLWSVLUOOVLQYITJL250O","&client_secret=").concat("BOTQMEKLZJKEIBT0UYJKOBLP1FCXPMLVZNFTP4SGKFRP0QZX","&v=20180323&radius=1500&ll=").concat(t.lat,",").concat(t.lng,"&query=restaurant")).then((function(e){return e.json()})).then((function(e){return e.response.groups[0].items})).then(function(){var e=Object(K.a)(Y.a.mark((function e(t){var a,c,r,o,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.length)){e.next=14;break}return c=t[a].venue.id,r=t[a].venue.name,o={lat:t[a].venue.location.lat,lng:t[a].venue.location.lng},"",2.5,e.next=9,Z(c,r,o.lat,o.lng,2.5,"");case 9:s=e.sent,n.push(s);case 11:a++,e.next=1;break;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(c.useContext)(j),t=Object(i.a)(e,2),n=(t[0],t[1]),r=Object(c.useContext)(l),o=Object(i.a)(r,1)[0],s=Object(c.useContext)(x),u=Object(i.a)(s,2),b=u[0],d=u[1],m=Object(c.useContext)(f),O=Object(i.a)(m,2),h=O[0],v=O[1],g=Object(c.useContext)(A),p=Object(i.a)(g,2),C=p[0],N=p[1],S=Object(c.useContext)(w),y=Object(i.a)(S,2),B=y[0],k=y[1],L=Object(c.useState)({}),V=Object(i.a)(L,2),F=V[0],P=V[1],E=Object(c.useState)(null),J=Object(i.a)(E,2),M=J[0],R=J[1],T=Object(c.useCallback)((function(e){var t=function(){var e=Object(K.a)(Y.a.mark((function e(t){var n,a,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={lat:t&&t.coords?t.coords.latitude:48.864716,lng:t&&t.coords?t.coords.longitude:2.349014},e.next=3,_(n);case 3:a=e.sent,c=Array.from(C),k(n),a.forEach((function(e){c.push(e)})),N(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();R(e),navigator.geolocation.getCurrentPosition(t,t)}),[C,k,N]);return Object(a.jsxs)(H.c,{googleMapsApiKey:X,children:[Object(a.jsxs)(H.a,{onLoad:T,mapContainerStyle:{width:"100%",height:"100%"},center:B,zoom:14,onBoundsChanged:function(){M&&M.getBounds()&&n({n:M.getBounds().Ta.i,s:M.getBounds().Ta.g,e:M.getBounds().La.i,o:M.getBounds().La.g})},onClick:function(e){d(!b),v({lat:e.latLng.lat(),lng:e.latLng.lng()})},children:[C.map((function(e){return z(e,o)?Object(a.jsx)(H.d,{position:e.location,onClick:function(){return function(e){P(e)}(e)}},e.id):null})),F.location&&Object(a.jsx)(H.b,{position:F.location,clickable:!0,onCloseClick:function(){return P({})},children:Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:F.restaurantName}),Object(a.jsx)("img",{width:"300px",src:F.streetview,alt:"restaurant"}),Object(a.jsx)("p",{children:F.address}),Object(a.jsx)("h4",{children:"Commentaires :"}),F.ratings.map((function(e,t){return Object(a.jsx)("p",{children:e.comment},t)}))]})}),B&&Object(a.jsx)(H.d,{position:B,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABKgAAASoBhIydXwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPLSURBVFiFxddPqFVVFAbw377qE1LUwBAVa9AgDNTSEpyUGMmLRyihRP/EP2TRpFEQwiMNB6lUNDEEwYmRUoOiSJvYC4LKSVgDRQ3qlZgNKt+j7JW2G5x15Hg85159FS1YnHv2/vb6vrv32vusnXLOrsVSSpOxAqswH7PD4Wz4cbyLIznnsWuK20tASmkWXsDjyDiMozgTDnPDl6IfCfuxLed8rlv8ThfivpTSIE7jdqzBTKzDZwG7O1y0rQvMmhhzOqU0mFLqa1WQc77KMQuf4CQGom0Ab2E0ZqLJRwNTHXMyYs1q5GogX4BhHMJ0LMZQF9I2H4qx0yPWMBZ0FRD/fBh7MAEbMTYO8tLHIsaEiDlcn4kqeV9M1aEYsP0fENd9e8Q8FBx9TQIGY72mh+p/i7z0jRH7JAavEBBTPxpJs7hh2j/HJtyJp3GsgeBNvI7N+AIL8TV2VZZjcXCMlktRCtiNofg9VAu8rzplgZmCd2q4rXgJqxVbcgZOYH0FU+XYXZ5BkzGClaGuGvQrTGjZqjfg2wp2U4uA+2oxB4JrBJM7iuM146NQW7Xnou8qyzn/hucrTd814Rra1wdXxoqO4mw/rDgV+yvAiziiOIbb7MNxCOgPrsNY1VF8WI7iLkytAE/gFkXmNlrO+Sd8H68/tGAuKKa7tKnBdRTzO4ov2hnMq42dhkX4o01ASilVRI+04XC+9j4vOGdXBcypgW6O4HO7BJ6vSLbRnPOlLrhfau9zqgJK+7Nh4O+4I6U0rSXwsniOdiFv6r9Y/ugoCom5ONUwcDl2YENL4PvjWebJa4oMfyJIV9f6SzsdnGd7CXhSkcVTU0o3VjtSSg/h4XidklKakXM+m3M+n3M+lXO+lHM+EXlSX94rBBxXVDLfuDrhOvgAl9c3pXRTSulFHKxh96WUJjb8iVdQFX8huJYGtwcUWToJb2j/mOyJE/BgF8xxrA3ccnzagNkbXOeD+4qjeGGX4Lsi8N4umIy3A/dyS/8i1aM4qtf92JJz/jKmvMnKfd4r40dqz6p9nHM+hi3Yn3MeK7fhNixJKQ1E56/XGbhqpcA6bgSbg2NJcBZVcZTOO/GqIkEew18tgcc7AxtwLjh2luV69SDagR9xAO8rvoRNgccjYKviwnIgOHZc7ulRlG7Az4rkWRmYR3VPwqcC1x8i1rqWorRLWT4H72FZ9D/YQ8AjgbsVt7mesrzHxWRiPO/tQn4O91TiXP/FpFamDyrWfEixdydF+yJFIfMsnglRM2PcpMAOxdhBtZqy6v/75bSngIqQ/+R6/jeT/+nWhIIUowAAAABJRU5ErkJggg=="})]}),Object(a.jsx)(Q,{clickedLatLng:h})]})};var ee=function(){return Object(a.jsx)(N,{children:Object(a.jsx)(C,{children:Object(a.jsx)(g,{children:Object(a.jsx)(v,{children:Object(a.jsx)(h,{children:Object(a.jsx)(m,{children:Object(a.jsx)(u,{children:Object(a.jsx)(b,{children:Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)("div",{className:"flex-col-top-center",children:[Object(a.jsx)(y,{}),Object(a.jsxs)("div",{className:"full-container",children:[Object(a.jsx)("div",{className:"display-container",children:Object(a.jsxs)("div",{className:"flex-col-center-center title",children:[Object(a.jsx)("h2",{children:"Restaurants \xe0 proximit\xe9"}),Object(a.jsx)(B,{}),Object(a.jsx)(W,{})]})}),Object(a.jsx)("div",{className:"map-container border",children:Object(a.jsx)($,{})})]})]})})})})})})})})})})},te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(ee,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/EatouV2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/EatouV2","/service-worker.js");te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ne(t,e)}))}}()},8:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.ce675395.chunk.js.map